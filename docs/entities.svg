<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="CLASS" height="3725px" preserveAspectRatio="none" style="width:8287px;height:3725px;background:#FFFFFF;" version="1.1" viewBox="0 0 8287 3725" width="8287.5px" zoomAndPan="magnify"><defs/><g><!--cluster Task entity--><g class="cluster" data-entity="Task entity" data-source-line="14" data-uid="ent0003" id="cluster_Task entity"><rect fill="none" height="2653.125" rx="15.625" ry="15.625" style="stroke:#181818;stroke-width:6.25;" width="3350" x="2693.75" y="981.25"/><path d="M3213.3606,981.25 L3213.3606,1038.1165 L3150.8606,1100.6165 L2693.75,1100.6165" fill="none" style="stroke:#181818;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" font-weight="bold" lengthAdjust="spacing" textLength="457.1106" x="2712.5" y="1069.574">Task entity</text></g><!--cluster TaskDialogEvent entity--><g class="cluster" data-entity="TaskDialogEvent entity" data-source-line="56" data-uid="ent0015" id="cluster_TaskDialogEvent entity"><rect fill="none" height="2553.125" rx="15.625" ry="15.625" style="stroke:#181818;stroke-width:6.25;" width="2500" x="43.75" y="1134.375"/><path d="M1069.0063,1134.375 L1069.0063,1191.2415 L1006.5063,1253.7415 L43.75,1253.7415" fill="none" style="stroke:#181818;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" font-weight="bold" lengthAdjust="spacing" textLength="962.7563" x="62.5" y="1222.699">TaskDialogEvent entity</text></g><!--cluster UserStateEvent entity--><g class="cluster" data-entity="UserStateEvent entity" data-source-line="86" data-uid="ent0025" id="cluster_UserStateEvent entity"><rect fill="none" height="2450" rx="15.625" ry="15.625" style="stroke:#181818;stroke-width:6.25;" width="2056.25" x="6193.75" y="1184.375"/><path d="M7160.73,1184.375 L7160.73,1241.2415 L7098.23,1303.7415 L6193.75,1303.7415" fill="none" style="stroke:#181818;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" font-weight="bold" lengthAdjust="spacing" textLength="904.48" x="6212.5" y="1272.699">UserStateEvent entity</text></g><!--class TaskStatus--><g class="entity" data-entity="TaskStatus" data-source-line="15" data-uid="ent0004" id="entity_TaskStatus"><rect fill="#F1F1F1" height="652.4658" rx="15.625" ry="15.625" style="stroke:#181818;stroke-width:3.125;" width="637.6709" x="2793.75" y="2834.375"/><ellipse cx="2887.5" cy="2934.375" fill="#EB937F" rx="68.75" ry="68.75" style="stroke:#181818;stroke-width:6.25;"/><path d="M2860.2539,2968.75 L2860.2539,2898.7305 L2910.4492,2898.7305 L2910.4492,2910.5469 L2875.5859,2910.5469 L2875.5859,2927.4414 L2907.3242,2927.4414 L2907.3242,2939.2578 L2875.5859,2939.2578 L2875.5859,2956.9336 L2912.5977,2956.9336 L2912.5977,2968.75 L2860.2539,2968.75 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="437.6709" x="2975" y="2966.1407">TaskStatus</text><line style="stroke:#181818;stroke-width:3.125;" x1="2800" x2="3425.1709" y1="3034.375" y2="3034.375"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="170.3003" x="2831.25" y="3141.449">todo</text><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="457.196" x="2831.25" y="3242.0654">in_progress</text><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="301.593" x="2831.25" y="3342.6819">blocked</text><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="194.6533" x="2831.25" y="3443.2983">done</text></g><!--class TaskSource--><g class="entity" data-entity="TaskSource" data-source-line="22" data-uid="ent0005" id="entity_TaskSource"><rect fill="#F1F1F1" height="753.0823" rx="15.625" ry="15.625" style="stroke:#181818;stroke-width:3.125;" width="666.8518" x="3653.125" y="2784.375"/><ellipse cx="3746.875" cy="2884.375" fill="#EB937F" rx="68.75" ry="68.75" style="stroke:#181818;stroke-width:6.25;"/><path d="M3719.6289,2918.75 L3719.6289,2848.7305 L3769.8242,2848.7305 L3769.8242,2860.5469 L3734.9609,2860.5469 L3734.9609,2877.4414 L3766.6992,2877.4414 L3766.6992,2889.2578 L3734.9609,2889.2578 L3734.9609,2906.9336 L3771.9727,2906.9336 L3771.9727,2918.75 L3719.6289,2918.75 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="466.8518" x="3834.375" y="2916.1407">TaskSource</text><line style="stroke:#181818;stroke-width:3.125;" x1="3659.375" x2="4313.7268" y1="2984.375" y2="2984.375"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="170.2148" x="3690.625" y="3091.449">user</text><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="68.103" x="3690.625" y="3192.0654">ai</text><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="277.1118" x="3690.625" y="3292.6819">system</text><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="335.6018" x="3690.625" y="3393.2983">template</text><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="243.103" x="3690.625" y="3493.9148">import</text></g><!--class Task--><g class="entity" data-entity="Task" data-source-line="30" data-uid="ent0006" id="entity_Task"><rect fill="#F1F1F1" height="1054.9316" rx="15.625" ry="15.625" style="stroke:#181818;stroke-width:3.125;" width="1378.3142" x="3109.375" y="1200"/><ellipse cx="3677.1637" cy="1300" fill="#ADD1B2" rx="68.75" ry="68.75" style="stroke:#181818;stroke-width:6.25;"/><path d="M3662.5153,1299.0234 Q3662.5153,1310.7422 3666.1285,1317.0898 Q3669.7418,1323.3398 3676.9684,1323.3398 Q3685.3668,1323.3398 3689.4684,1310.7422 L3703.6285,1313.3789 Q3696.6949,1335.4492 3676.8707,1335.4492 Q3662.2223,1335.4492 3654.6051,1326.1719 Q3646.9879,1316.8945 3646.9879,1299.0234 Q3646.9879,1263.2813 3676.3824,1263.2813 Q3686.0504,1263.2813 3692.4957,1268.3594 Q3699.0387,1273.4375 3702.1637,1283.4961 L3688.0035,1286.9141 Q3686.5387,1281.4453 3683.5114,1278.418 Q3680.484,1275.293 3676.5778,1275.293 Q3662.5153,1275.293 3662.5153,1299.0234 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="189.6118" x="3805.2887" y="1331.7657">Task</text><line style="stroke:#181818;stroke-width:3.125;" x1="3115.625" x2="4481.4392" y1="1400" y2="1400"/><ellipse cx="3178.125" cy="1484.6832" fill="none" rx="18.75" ry="18.75" style="stroke:#038048;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="330.603" x="3234.375" y="1507.074">id: UUID</text><ellipse cx="3178.125" cy="1585.2997" fill="none" rx="18.75" ry="18.75" style="stroke:#038048;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="865.686" x="3234.375" y="1607.6904">created_at: timestamp</text><ellipse cx="3178.125" cy="1685.9161" fill="none" rx="18.75" ry="18.75" style="stroke:#038048;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="890.1245" x="3234.375" y="1708.3069">updated_at: timestamp</text><ellipse cx="3178.125" cy="1786.5326" fill="none" rx="18.75" ry="18.75" style="stroke:#038048;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="1215.8142" x="3234.375" y="1808.9233">parent_id: UUID? &#171;FK Task.id&#187;</text><ellipse cx="3178.125" cy="1887.149" fill="none" rx="18.75" ry="18.75" style="stroke:#038048;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="398.7488" x="3234.375" y="1909.5398">title: string</text><ellipse cx="3178.125" cy="1987.7655" fill="none" rx="18.75" ry="18.75" style="stroke:#038048;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="719.7388" x="3234.375" y="2010.1563">status: TaskStatus</text><ellipse cx="3178.125" cy="2088.382" fill="none" rx="18.75" ry="18.75" style="stroke:#038048;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="447.3694" x="3234.375" y="2110.7727">actor: Actor</text><ellipse cx="3178.125" cy="2188.9984" fill="none" rx="18.75" ry="18.75" style="stroke:#038048;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="778.1006" x="3234.375" y="2211.3892">source: TaskSource</text></g><g class="entity" data-entity="GMN12" data-source-line="47" data-uid="ent0013" id="entity_GMN12"><path d="M4543.75,2846.875 L4543.75,3469.9524 A0,0 0 0 0 4543.75,3469.9524 L5944.0155,3469.9524 A0,0 0 0 0 5944.0155,3469.9524 L5944.0155,2909.375 L5881.5155,2846.875 L4956.5625,2846.875 L4331.4375,2256.625 L4906.5625,2846.875 L4543.75,2846.875 A0,0 0 0 0 4543.75,2846.875" fill="#FEFFDD" style="stroke:#181818;stroke-width:3.125;"/><path d="M5881.5155,2846.875 L5881.5155,2909.375 L5944.0155,2909.375 L5881.5155,2846.875" fill="#FEFFDD" style="stroke:#181818;stroke-width:3.125;"/><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="374.8291" x="4581.25" y="2954.3365">Invariants:</text><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="980.2765" x="4581.25" y="3047.7661">- updated_at &gt;= created_at</text><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="812.8571" x="4581.25" y="3141.1957">- parent_id exists if set</text><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="761.0046" x="4581.25" y="3234.6252">- parent_id != id if set</text><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="636.6699" x="4581.25" y="3328.0548">- title is not empty</text><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="1269.0155" x="4581.25" y="3421.4844">- status, actor, and source are valid</text></g><!--class TaskDialogEventType--><g class="entity" data-entity="TaskDialogEventType" data-source-line="57" data-uid="ent0016" id="entity_TaskDialogEventType"><rect fill="#F1F1F1" height="853.6987" rx="15.625" ry="15.625" style="stroke:#181818;stroke-width:3.125;" width="1055.9448" x="140.625" y="2731.25"/><ellipse cx="234.375" cy="2831.25" fill="#EB937F" rx="68.75" ry="68.75" style="stroke:#181818;stroke-width:6.25;"/><path d="M207.1289,2865.625 L207.1289,2795.6055 L257.3242,2795.6055 L257.3242,2807.4219 L222.4609,2807.4219 L222.4609,2824.3164 L254.1992,2824.3164 L254.1992,2836.1328 L222.4609,2836.1328 L222.4609,2853.8086 L259.4727,2853.8086 L259.4727,2865.625 L207.1289,2865.625 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="855.9448" x="321.875" y="2863.0157">TaskDialogEventType</text><line style="stroke:#181818;stroke-width:3.125;" x1="146.875" x2="1190.3198" y1="2931.25" y2="2931.25"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="574.0051" x="178.125" y="3038.324">task_proposed</text><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="564.2639" x="178.125" y="3138.9404">task_accepted</text><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="476.6357" x="178.125" y="3239.5569">task_started</text><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="549.5667" x="178.125" y="3340.1733">task_progress</text><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="500.9888" x="178.125" y="3440.7898">task_refused</text><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="403.7903" x="178.125" y="3541.4063">task_done</text></g><!--class TaskDialogEvent--><g class="entity" data-entity="TaskDialogEvent" data-source-line="66" data-uid="ent0017" id="entity_TaskDialogEvent"><rect fill="#F1F1F1" height="753.0823" rx="15.625" ry="15.625" style="stroke:#181818;stroke-width:3.125;" width="1242.0227" x="1196.875" y="1353.125"/><ellipse cx="1461.8964" cy="1453.125" fill="#ADD1B2" rx="68.75" ry="68.75" style="stroke:#181818;stroke-width:6.25;"/><path d="M1447.2479,1452.1484 Q1447.2479,1463.8672 1450.8612,1470.2148 Q1454.4745,1476.4648 1461.701,1476.4648 Q1470.0995,1476.4648 1474.201,1463.8672 L1488.3612,1466.5039 Q1481.4276,1488.5742 1461.6034,1488.5742 Q1446.955,1488.5742 1439.3378,1479.2969 Q1431.7206,1470.0195 1431.7206,1452.1484 Q1431.7206,1416.4063 1461.1151,1416.4063 Q1470.7831,1416.4063 1477.2284,1421.4844 Q1483.7714,1426.5625 1486.8964,1436.6211 L1472.7362,1440.0391 Q1471.2714,1434.5703 1468.244,1431.543 Q1465.2167,1428.418 1461.3104,1428.418 Q1447.2479,1428.418 1447.2479,1452.1484 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="661.4197" x="1587.4567" y="1484.8907">TaskDialogEvent</text><line style="stroke:#181818;stroke-width:3.125;" x1="1203.125" x2="2432.6477" y1="1553.125" y2="1553.125"/><ellipse cx="1265.625" cy="1637.8082" fill="none" rx="18.75" ry="18.75" style="stroke:#038048;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="330.603" x="1321.875" y="1660.199">id: UUID</text><ellipse cx="1265.625" cy="1738.4247" fill="none" rx="18.75" ry="18.75" style="stroke:#038048;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="865.686" x="1321.875" y="1760.8154">created_at: timestamp</text><ellipse cx="1265.625" cy="1839.0411" fill="none" rx="18.75" ry="18.75" style="stroke:#038048;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="1079.5227" x="1321.875" y="1861.4319">task_id: UUID &#171;FK Task.id&#187;</text><ellipse cx="1265.625" cy="1939.6576" fill="none" rx="18.75" ry="18.75" style="stroke:#038048;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="1069.9524" x="1321.875" y="1962.0483">type: TaskDialogEventType</text><ellipse cx="1265.625" cy="2040.274" fill="none" rx="18.75" ry="18.75" style="stroke:#038048;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="447.3694" x="1321.875" y="2062.6648">actor: Actor</text></g><g class="entity" data-entity="GMN22" data-source-line="79" data-uid="ent0023" id="entity_GMN22"><path d="M1418.75,2940.625 L1418.75,3376.8433 A0,0 0 0 0 1418.75,3376.8433 L2444.2261,3376.8433 A0,0 0 0 0 2444.2261,3376.8433 L2444.2261,3003.125 L2381.7261,2940.625 L1939.375,2940.625 L1848,2103.4375 L1889.375,2940.625 L1418.75,2940.625 A0,0 0 0 0 1418.75,2940.625" fill="#FEFFDD" style="stroke:#181818;stroke-width:3.125;"/><path d="M2381.7261,2940.625 L2381.7261,3003.125 L2444.2261,3003.125 L2381.7261,2940.625" fill="#FEFFDD" style="stroke:#181818;stroke-width:3.125;"/><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="374.8291" x="1456.25" y="3048.0865">Invariants:</text><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="496.8628" x="1456.25" y="3141.5161">- append-only</text><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="537.3291" x="1456.25" y="3234.9457">- task_id exists</text><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="894.2261" x="1456.25" y="3328.3752">- type and actor are valid</text></g><!--class UserState--><g class="entity" data-entity="UserState" data-source-line="87" data-uid="ent0026" id="entity_UserState"><rect fill="#F1F1F1" height="753.0823" rx="15.625" ry="15.625" style="stroke:#181818;stroke-width:3.125;" width="589.0503" x="6293.75" y="2784.375"/><ellipse cx="6387.5" cy="2884.375" fill="#EB937F" rx="68.75" ry="68.75" style="stroke:#181818;stroke-width:6.25;"/><path d="M6360.2539,2918.75 L6360.2539,2848.7305 L6410.4492,2848.7305 L6410.4492,2860.5469 L6375.5859,2860.5469 L6375.5859,2877.4414 L6407.3242,2877.4414 L6407.3242,2889.2578 L6375.5859,2889.2578 L6375.5859,2906.9336 L6412.5977,2906.9336 L6412.5977,2918.75 L6360.2539,2918.75 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="389.0503" x="6475" y="2916.1407">UserState</text><line style="stroke:#181818;stroke-width:3.125;" x1="6300" x2="6876.5503" y1="2984.375" y2="2984.375"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="184.7412" x="6331.25" y="3091.449">work</text><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="403.833" x="6331.25" y="3192.0654">household</text><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="145.8618" x="6331.25" y="3292.6819">rest</text><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="209.1797" x="6331.25" y="3393.2983">sleep</text><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="442.7124" x="6331.25" y="3493.9148">unavailable</text></g><!--class UserStateEvent--><g class="entity" data-entity="UserStateEvent" data-source-line="95" data-uid="ent0027" id="entity_UserStateEvent"><rect fill="#F1F1F1" height="652.4658" rx="15.625" ry="15.625" style="stroke:#181818;stroke-width:3.125;" width="1028.186" x="6296.875" y="1403.125"/><ellipse cx="6487.5491" cy="1503.125" fill="#ADD1B2" rx="68.75" ry="68.75" style="stroke:#181818;stroke-width:6.25;"/><path d="M6472.9007,1502.1484 Q6472.9007,1513.8672 6476.514,1520.2148 Q6480.1273,1526.4648 6487.3538,1526.4648 Q6495.7523,1526.4648 6499.8538,1513.8672 L6514.014,1516.5039 Q6507.0804,1538.5742 6487.2562,1538.5742 Q6472.6077,1538.5742 6464.9905,1529.2969 Q6457.3734,1520.0195 6457.3734,1502.1484 Q6457.3734,1466.4063 6486.7679,1466.4063 Q6496.4359,1466.4063 6502.8812,1471.4844 Q6509.4241,1476.5625 6512.5491,1486.6211 L6498.389,1490.0391 Q6496.9241,1484.5703 6493.8968,1481.543 Q6490.8694,1478.418 6486.9632,1478.418 Q6472.9007,1478.418 6472.9007,1502.1484 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="612.7991" x="6596.5878" y="1534.8907">UserStateEvent</text><line style="stroke:#181818;stroke-width:3.125;" x1="6303.125" x2="7318.811" y1="1603.125" y2="1603.125"/><ellipse cx="6365.625" cy="1687.8082" fill="none" rx="18.75" ry="18.75" style="stroke:#038048;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="330.603" x="6421.875" y="1710.199">id: UUID</text><ellipse cx="6365.625" cy="1788.4247" fill="none" rx="18.75" ry="18.75" style="stroke:#038048;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="865.686" x="6421.875" y="1810.8154">created_at: timestamp</text><ellipse cx="6365.625" cy="1889.0411" fill="none" rx="18.75" ry="18.75" style="stroke:#038048;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="627.3682" x="6421.875" y="1911.4319">state: UserState</text><ellipse cx="6365.625" cy="1989.6576" fill="none" rx="18.75" ry="18.75" style="stroke:#038048;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="447.3694" x="6421.875" y="2012.0483">actor: Actor</text></g><g class="entity" data-entity="GMN31" data-source-line="106" data-uid="ent0032" id="entity_GMN31"><path d="M7100,2987.5 L7100,3330.2887 A0,0 0 0 0 7100,3330.2887 L8148.0499,3330.2887 A0,0 0 0 0 8148.0499,3330.2887 L8148.0499,3050 L8085.5499,2987.5 L7554.5625,2987.5 L6995.875,2054.5625 L7504.5625,2987.5 L7100,2987.5 A0,0 0 0 0 7100,2987.5" fill="#FEFFDD" style="stroke:#181818;stroke-width:3.125;"/><path d="M8085.5499,2987.5 L8085.5499,3050 L8148.0499,3050 L8085.5499,2987.5" fill="#FEFFDD" style="stroke:#181818;stroke-width:3.125;"/><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="374.8291" x="7137.5" y="3094.9615">Invariants:</text><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="496.8628" x="7137.5" y="3188.3911">- append-only</text><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="916.7999" x="7137.5" y="3281.8207">- state and actor are valid</text></g><!--class Actor--><g class="entity" data-entity="Actor" data-source-line="6" data-uid="ent0002" id="entity_Actor"><rect fill="#F1F1F1" height="551.8494" rx="15.625" ry="15.625" style="stroke:#181818;stroke-width:3.125;" width="404.2236" x="3596.875" y="43.75"/><ellipse cx="3690.625" cy="143.75" fill="#EB937F" rx="68.75" ry="68.75" style="stroke:#181818;stroke-width:6.25;"/><path d="M3663.3789,178.125 L3663.3789,108.1055 L3713.5742,108.1055 L3713.5742,119.9219 L3678.7109,119.9219 L3678.7109,136.8164 L3710.4492,136.8164 L3710.4492,148.6328 L3678.7109,148.6328 L3678.7109,166.3086 L3715.7227,166.3086 L3715.7227,178.125 L3663.3789,178.125 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="204.2236" x="3778.125" y="175.5157">Actor</text><line style="stroke:#181818;stroke-width:3.125;" x1="3603.125" x2="3994.8486" y1="243.75" y2="243.75"/><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="121.637" x="3634.375" y="350.824">bot</text><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="170.2148" x="3634.375" y="451.4404">user</text><text fill="#000000" font-family="sans-serif" font-size="87.5" lengthAdjust="spacing" textLength="277.1118" x="3634.375" y="552.0569">system</text></g><!--link Task to Task--><g class="link" data-entity-1="Task" data-entity-2="Task" data-source-line="41" data-uid="lnk7" id="link_Task_Task"><path codeLine="41" d="M4491.9375,1592.75 C4619.625,1609.625 4709.375,1654.75 4709.375,1728.125 C4709.375,1801.5 4656.8017,1841.7118 4529.1142,1858.5868" fill="none" id="Task-to-Task" style="stroke:#181818;stroke-width:6.25;"/><polygon fill="#181818" points="4491.9375,1863.5,4550.9781,1880.9147,4522.9181,1859.4056,4544.4271,1831.3457,4491.9375,1863.5" style="stroke:#181818;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="338.8062" x="4746.875" y="1760.5865">parent_id</text><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="135.5225" x="4538.3211" y="1570.767">0..1</text><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="121.9543" x="4537.9077" y="1858.0158">0..*</text></g><!--link Task to TaskStatus--><g class="link" data-entity-1="Task" data-entity-2="TaskStatus" data-source-line="42" data-uid="lnk8" id="link_Task_TaskStatus"><path codeLine="42" d="M3546.9375,2256.625 C3453.125,2450.1875 3365.9777,2630.0658 3283.5402,2800.1908" fill="none" id="Task-to-TaskStatus" style="stroke:#181818;stroke-width:6.25;"/><polygon fill="#181818" points="3267.1875,2833.9375,3314.2143,2794.2192,3280.8147,2805.8152,3269.2187,2772.4157,3267.1875,2833.9375" style="stroke:#181818;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="216.7725" x="3462.5" y="2526.2115">status</text></g><!--reverse link Actor to Task--><g class="link" data-entity-1="Actor" data-entity-2="Task" data-source-line="43" data-uid="lnk10" id="link_Actor_Task"><path codeLine="43" d="M3800,631.8125 C3800,803.0625 3800,993 3800,1198.75" fill="none" id="Actor-backto-Task" style="stroke:#181818;stroke-width:6.25;"/><polygon fill="#181818" points="3800,594.3125,3775,650.5625,3800,625.5625,3825,650.5625,3800,594.3125" style="stroke:#181818;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="180.6305" x="3806.25" y="863.7115">actor</text></g><!--link Task to TaskSource--><g class="link" data-entity-1="Task" data-entity-2="TaskSource" data-source-line="44" data-uid="lnk11" id="link_Task_TaskSource"><path codeLine="44" d="M3869,2256.625 C3892.125,2431.25 3912.3943,2584.9489 3933.6443,2745.5739" fill="none" id="Task-to-TaskSource" style="stroke:#181818;stroke-width:6.25;"/><polygon fill="#181818" points="3938.5625,2782.75,3955.9692,2723.7071,3934.464,2751.7699,3906.4011,2730.2647,3938.5625,2782.75" style="stroke:#181818;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="243.869" x="3906.25" y="2526.2115">source</text></g><!--link TaskDialogEvent to Task--><g class="link" data-entity-1="TaskDialogEvent" data-entity-2="Task" data-source-line="74" data-uid="lnk18" id="link_TaskDialogEvent_Task"><path codeLine="74" d="M2442.9375,1728.125 C2654.4375,1728.125 2854.4375,1728.125 3070.9375,1728.125" fill="none" id="TaskDialogEvent-to-Task" style="stroke:#181818;stroke-width:6.25;"/><polygon fill="#181818" points="3108.4375,1728.125,3052.1875,1703.125,3077.1875,1728.125,3052.1875,1753.125,3108.4375,1728.125" style="stroke:#181818;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="257.4371" x="2646.875" y="1691.8365">task_id</text><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="121.9543" x="2489.03" y="1713.9927">0..*</text><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="45.1874" x="3014.6777" y="1714.0152">1</text></g><!--link TaskDialogEvent to TaskDialogEventType--><g class="link" data-entity-1="TaskDialogEvent" data-entity-2="TaskDialogEventType" data-source-line="75" data-uid="lnk19" id="link_TaskDialogEvent_TaskDialogEventType"><path codeLine="75" d="M1519.625,2103.4375 C1363.875,2295.5625 1196.3649,2502.182 1034.7399,2701.557" fill="none" id="TaskDialogEvent-to-TaskDialogEventType" style="stroke:#181818;stroke-width:6.25;"/><polygon fill="#181818" points="1011.125,2730.6875,1065.9677,2702.735,1030.8041,2706.4121,1027.127,2671.2485,1011.125,2730.6875" style="stroke:#181818;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="153.5736" x="1250" y="2526.2115">type</text></g><!--reverse link Actor to TaskDialogEvent--><g class="link" data-entity-1="Actor" data-entity-2="TaskDialogEvent" data-source-line="76" data-uid="lnk21" id="link_Actor_TaskDialogEvent"><path codeLine="76" d="M3561.9789,435.1721 C3333.4164,544.4221 2990.0625,720.5625 2693.75,931.25 C2518.5625,1055.8125 2339.875,1211.1875 2190,1351.1875" fill="none" id="Actor-backto-TaskDialogEvent" style="stroke:#181818;stroke-width:6.25;"/><polygon fill="#181818" points="3595.8125,419,3534.2807,420.7023,3567.6178,432.4767,3555.8434,465.8138,3595.8125,419" style="stroke:#181818;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="180.6305" x="2900" y="863.7115">actor</text></g><!--link UserStateEvent to UserState--><g class="link" data-entity-1="UserStateEvent" data-entity-2="UserState" data-source-line="102" data-uid="lnk28" id="link_UserStateEvent_UserState"><path codeLine="102" d="M6761.75,2054.5625 C6727.375,2271.125 6687.8118,2520.7755 6651.9368,2746.963" fill="none" id="UserStateEvent-to-UserState" style="stroke:#181818;stroke-width:6.25;"/><polygon fill="#181818" points="6646.0625,2784,6679.5654,2732.3607,6650.9578,2753.1358,6630.1827,2724.5282,6646.0625,2784" style="stroke:#181818;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="176.1475" x="6706.25" y="2526.2115">state</text></g><!--reverse link Actor to UserStateEvent--><g class="link" data-entity-1="Actor" data-entity-2="UserStateEvent" data-source-line="103" data-uid="lnk30" id="link_Actor_UserStateEvent"><path codeLine="103" d="M4041.6507,347.8452 C4453.5257,393.0952 5364.625,531.8125 6043.75,931.25 C6247.5625,1051.125 6433.625,1239.3125 6571.625,1402.0625" fill="none" id="Actor-backto-UserStateEvent" style="stroke:#181818;stroke-width:6.25;"/><polygon fill="#181818" points="4004.375,343.75,4057.5584,374.7433,4035.4381,347.1627,4063.0187,325.0424,4004.375,343.75" style="stroke:#181818;stroke-width:6.25;"/><text fill="#000000" font-family="sans-serif" font-size="81.25" lengthAdjust="spacing" textLength="180.6305" x="5937.5" y="863.7115">actor</text></g><!--SRC=[bPHBZzCm483l-HL3BqX0g-w5GxGRXDX5Md5aUwxSPDfQJMpBTWeLuhyp7ZjfKb9rzvB4ytvyZZj8POGLJQtB0rPG6GcVbyiisyiA0HlZJz2Wt-lAPTbx-AQRHYlm9uDqHjKsyBNqsiAV362ZFJrRXvPUxkGyDjdVuFMalFGoU1XH7iGEOVOYt04mo4ypkB__JXLWKN0OZXhqFxtmhMCPWDULvW-friRgdKNd-Bo9bVDtfHNI1oKTXj6jBJ65ITK12CclL2Pde6vhuJ5cQOoslejLri8v3fR2V9HL3glLysCybHR9iLeBduEN3Jel6XDLhQckgMZkD85r5-fBcCCFphAGLL548vfGZJauRwNQHP7ZkUI36KMv29l8uqAI9RUU3yRGTSIzp9QBnTqCvlE2Fp_CeZY7lhBECfWCLXBgINcZkZLa44d8GQG2nfvn2-GPwo2zqXu3D5uteBTinMK_gwEmKYZlSZxFuJn4A1xWFEsaxii5_2sTTo2tuF1_xRi7eET8oUC5wK8n4VUaY0r-YitGIrMfSg1mS1Gr3mT97De8d8_OVfIYrhkd8sM-XVd0z8NkLSSxQGBeHhi4Dqj4MQBnGmaLQaU2qUrWYSLjEueol2TdjeSrlnLp3jjPJuDClULJ3K_2sqCwB2f1EhToj_S1shkUs9H_mga3y7BCEV_5fXmcO9wcTU1r1LnX324orwhkk4g59b8xOIWe8CRPRXEsehzOk8fu4x3UCctqbxRnakqr8R7NTQI2U8ajk1enhhHLuYXaBJRr1IeNoTzAIhXO148VvVhwBnA5HPxRYRyWd31xrVh6Jg_U7kUylQb_]--></g></svg>